<!DOCTYPE html>
<html lang="en">
<head>
    <title>Simple AI</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="./index.css">
</head>
<body style="font-family: Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">

<!-- Navigation bar -->

<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">CVUT CIIRC</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#">Team</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Contact</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Technology</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Create app</a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#initialize">Project name</a></li>
                        <li><a class="dropdown-item" href="#upload">Upload file</a></li>
                        <li><a class="dropdown-item" href="#controlers">Select controlers</a></li>
                        <li><a class="dropdown-item" href="#final">Test the app</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
<!--  
  <div class="container-fluid mt-3">
    <h3>Navbar With Dropdown</h3>
    <p>This example adds a dropdown menu in the navbar.</p>
  </div>
-->

<!-- Main header -->
<div class="container-fluid p-5 bg-primary text-white text-center">
    <h1>Simple AI</h1>
    <p>Streamline Your Processes with AI</p>
</div>

<div class="container mt-5">

    <div class="row">
        <!-- First Row -->
        <div class="col-sm-4">
            <h3>Upload document</h3>
            <p>Select the document PDF file from the disc</p>

        </div>
        <div class="col-sm-4">
            <!-- Second Column -->
            <h3>Select controles</h3>
            <p>The bot offers several iconss to control the operation. .</p>

        </div>
        <div class="col-sm-4">
            <!-- Thirdd Column --> <h3>Select style</h3>
            <p>We offer several color schemas</p>

        </div>
    </div>


    <div class="container-fluid p-5 bg-primary text-white text-center  mt-5" id="initialize">
        <h1>Initialize the project</h1>
        <p>Give a name to the project and add a short description.</p>
    </div>

    <div class="container mt-5">
        <div class="row">
            <div class="col"></div>

            <div class="col">
                <!-- Central Column -->
                <h2>Project name</h2>
                <input class="form-control border-primary" type="text">
                <h2>Description</h2>
                <form action="/upload" method="post" enctype="multipart/form-dat">
                    <div class="mb-3 mt-3">
                        <textarea class="form-control border-primary" rows="5" id="comment" name="text"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>

            </div>
            <div class="col"></div>
        </div>
    </div>

    <div class="container-fluid p-5 bg-primary text-white text-center  mt-5" id="upload">
        <h1>Step 1</h1>
        <p>Upload your document</p>
    </div>

    <div class="container mt-5">
        <div class="row">
            <div class="col"></div>

            <div class="col">
                <!-- Central Column -->
                <form id="uploadForm" action="https://universal-cqa-develop.alquist.ai/upload_manual" method="get"
                      enctype="multipart/form-data" target="responseIframe">

                    <input type="file" class="form-control border-primary" id="fileInput" name="file" accept=".pdf">
                    <button id="uploadBtn" class="btn btn-primary mt-2" type="submit">
                        <span id="uploadBtnTxt">Upload</span>
                        <span id="spinner" class="spinner-border spinner-border-sm d-none" role="status"
                              aria-hidden="true"></span>
                    </button>
                    <br>
                    <label for="responseIframe" style="margin-top: 10px;">API Response</label>
                    <div class="embed-responsive embed-responsive-16by9">
                        <iframe id="responseIframe" name="responseIframe" height="60em"></iframe>
                    </div>
                </form>



                <button id="testBtn" class="btn btn-primary mt-2">
                    Test CORS
                </button>


            </div>
            <div class="col"></div>
        </div>
    </div>

    <div class="container-fluid p-5 bg-primary text-white text-center  mt-5" id="controlers">
        <h1>Step 2</h1>
        <p>Select the bot controlers</p>
    </div>

    <div class="container mt-5">
        <div class="row">
            <div class="col"></div>

            <div class="col">
                <!-- Central Column -->
                <h3>Icons</h3>
                <div>
                    <div class="form-check form-switch">
                        <label for="cvutIcon" class="form-check-label">Show CVUT logo</label>
                        <input type="checkbox" checked name="cvutIcon" id="cvutIcon" class="form-check-input">
                    </div>

                    <div class="form-check form-switch">
                        <label for="mic" class="form-check-label">Mic Icon</label>
                        <input type="checkbox" name="mic" id="mic" class="form-check-input" checked>
                    </div>
                    <div class="form-check form-switch">
                        <label for="mute" class="form-check-label">Mute Icon</label>
                        <input type="checkbox" name="mic" id="mute" class="form-check-input" checked>
                    </div>
                    <div class="form-check form-switch">
                        <label for="restart" class="form-check-label">Restart Icon</label>
                        <input type="checkbox" name="mic" id="restart" class="form-check-input" checked>
                    </div>

                </div>

                <hr>

                <h3>Text input</h3>

                <div class="form-check form-switch">
                    <label for="textInput" class="form-check-label">Enable Text Input</label>
                    <input type="checkbox" name="textInput" id="textInput" class="form-check-input">
                </div>

                <hr>

                <h3>Bot Message</h3>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label for="textColorBot">Text Color</label>
                    <input type="color" class="form-control" id="textColorBot" value="#FFFFFF"
                           title="Choose your color" style="width: 90px;">
                </div>
                <div style="justify-content: space-between; align-items: center; display: none;">
                    <label for="TextOutlineBot">Text Outline Color</label>
                    <input type="color" class="form-control" id="TextOutlineBot" value="#69737c"
                           title="Choose your color" style="width: 90px;">
                </div>
                <div style="display:flex; justify-content: space-between; align-items:center;">
                    <label style="margin-bottom:0;" for="messageBotBackground">Background Color</label>
                    <input type="color" class="form-control" id="messageBotBackground" value="rgb(0,0,0)"
                           title="Choose your color" style="width: 90px;">
                </div>
                <div style="align-items:center; margin-top: 6px; display: flex; justify-content: space-between;">
                    <label style="margin-bottom:0;" for="botOpacity" class="form-label">Background Opacity</label>
                    <input type="range" value="0.4" min="0" style="width: 85px; margin-right: 1px;" max="1"
                           step="0.05" class="form-range" id="botOpacity">
                </div>

                <hr/>

                <h3>User Message</h3>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label for="textColorUser">Text Color</label>
                    <input type="color" class="form-control" id="textColorUser" value="#FFFFFF"
                           title="Choose your color" style="width: 90px;">
                </div>
                <hr style="display: none"/>
                <div style="display: none; justify-content: space-between; align-items: center;">
                    <label for="TextOutlineUser">Text Outline Color</label>
                    <input type="color" class="form-control" id="TextOutlineUser" value="#B2BFCD"
                           title="Choose your color" style="width: 90px;">
                </div>
                <div style="display:flex; justify-content: space-between; align-items:center;">
                    <label style="margin-bottom:0;" for="messageBackgroundUser">Background Color</label>
                    <input type="color" class="form-control" id="messageBackgroundUser" value="#FFFFFF"
                           title="Choose your color" style="width: 90px;">
                </div>
                <div style="align-items:center; margin-top: 6px; display: flex; justify-content: space-between;">
                    <label style="margin-bottom:0;" for="userOpacity" class="form-label">Background Opacity</label>
                    <input type="range" value="0.3" min="0" max="1" step="0.05"
                           style="width: 85px; margin-right: 1px;" class="form-range" id="userOpacity">
                </div>

                <hr/>

                <h3>Suggestions style</h3>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label for="textColorSuggestions">Text Color and Alpha</label>
                    <span style="display: flex">
					<input type="color" class="form-control" id="textColorSuggestions" value="#FFFFFF"
                           title="Choose your color" style="width: 45px; margin-right: 0">
					<input type="number" class="form-control" id="textColorSuggestionsAlpha" value="1" max="1" min="0"
                           step="0.1" title="Choose your color" style="margin-left: 0; width: 90px;">
				</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label for="backgroundColorSuggestions">Background Color and Alpha</label>
                    <span style="display: flex">
					<input type="color" class="form-control" id="backgroundColorSuggestions" value="#FFFFFF"
                           title="Choose your color" style="width: 45px; margin-right: 0">
					<input type="number" class="form-control" id="backgroundColorSuggestionsAlpha" value="0.3" max="1"
                           min="0" step="0.1" title="Choose your color" style="margin-left: 0; width: 90px;">
				</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label for="hoverBackgroundColorSuggestions">Hover Background Color and Alpha</label>
                    <span style="display: flex">
					<input type="color" class="form-control" id="hoverBackgroundColorSuggestions" value="#FFFFFF"
                           title="Choose your color" style="width: 45px; margin-right: 0">
					<input type="number" class="form-control" id="hoverBackgroundColorSuggestionsAlpha" value="0.5"
                           max="1" min="0" step="0.1" title="Choose your color" style="margin-left: 0; width: 90px;">
				</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label for="activeBackgroundColorSuggestions">Active Background Color and Alpha</label>
                    <span style="display: flex">
					<input type="color" class="form-control" id="activeBackgroundColorSuggestions" value="#FFFFFF"
                           title="Choose your color" style="width: 45px; margin-right: 0">
					<input type="number" class="form-control" id="activeBackgroundColorSuggestionsAlpha" value="0.7"
                           max="1" min="0" step="0.1" title="Choose your color" style="margin-left: 0; width: 90px;">
                    </span>
                </div>


                <hr>


                <h3>Background</h3>
                <p>You can set the background as a color or an image.</p>
                <div style="display:flex; justify-content: space-between; align-items:center;">
                    <label style="margin-bottom:0;" for="botBackgroundColor">Primary Color</label>
                    <input type="color" class="form-control" id="botBackgroundColor" value="#6737ff"
                           title="Choose your color" style="width: 90px;">
                </div>
                <div style="display:flex; justify-content: space-between; align-items:center;">
                    <label style="margin-bottom:0;" for="botBackgroundColorSecondary">Secondary Color</label>
                    <input type="color" class="form-control" id="botBackgroundColorSecondary" value="#28568c"
                           title="Choose your color" style="width: 90px;">
                </div>
                <hr>

                <h3>Images</h3>

                <div style="display:flex; justify-content: space-between; align-items:center;">
                    <label style="margin-bottom:0;" for="backgroundUrl">Background Image URL</label>
                    <input type="text" class="form-control" id="backgroundUrl" placeholder="url..."
                           title="Choose the url" style="width: 90px;">
                </div>
                <div style="display:flex; justify-content: space-between; align-items:center; margin-top: 3px;">
                    <label for="backgroundBlur">Background Image Blur</label>
                    <input type="number" value="0" min="0" step="0.5" style="width: 90px; margin-right: 1px;"
                           class="form-number" id="backgroundBlur">
                </div>
                <div style="display:flex; justify-content: space-between; align-items:center;">
                    <label style="margin-bottom:0;" for="triggerImgUrl">Trigger Image URL</label>
                    <input type="text" class="form-control" id="triggerImgUrl" placeholder="url..."
                           title="Choose the url" style="width: 90px;">
                </div>

                <button id="generateEmbedCodeButton" style="margin-bottom: 20px; margin-top: 10px;"
                        class="btn btn-primary">Continue
                </button>
                <div id="embedParamsParent" class="d-none">
                    JSON configuration file:
                    <button onclick="copyFunction();" style="float: right;">Copy to clipboard</button>
                    <pre id="embedParams"
                         style="background-color: #D9D9D9; padding: 20px; color:black; border-radius: 10px; margin-bottom: 20px;width: 100%; overflow: auto"></pre>

                </div>
            </div>
            <div class="col"></div>
        </div>
    </div>
</div>

<div id="botContainer">
    <div id="botDiv"></div>
</div>

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>


<script>
    document.getElementById('uploadForm').addEventListener('submit', function (e) {
        // Display the spinner when the button is clicked
        document.getElementById('spinner').classList.remove('d-none');
        document.getElementById('uploadBtnTxt').innerText = "Loading...";
        document.getElementById('uploadBtn').disabled = true;
    });

    document.getElementById('responseIframe').addEventListener('load', function (e) {
        console.log("iFrame loaded");
        // Display the spinner when the button is clicked
        document.getElementById('spinner').classList.add('d-none');
        document.getElementById('uploadBtnTxt').innerText = "Upload";
        document.getElementById('uploadBtn').disabled = false;
    });

    // var clientParams = {
    //     allowUrlParams: true,
    //     fullScreen: false,
    //     guiMode: 'chat',
    //     backgroundColor: '#6737ff',
    //     textInputEnabled: false,
    //     domain: '.flowstorm.ai',
    //     mode: 'voice',
    //     elementId: "botDiv",
    //     collapsable: true,
    //     interactionMode: "GUIDE",
    //     sound: true,
    //     search: true,
    //     controlIcons: {mic: true, mute: true, restart: true},
    // };
    //
    // initFSClientBot({
    //     ...clientParams,
    // });

    const sendRequest = (
        url,
        method,
        callback,
        token = null,
        data = null,
        notFoundCallback = () => {
            console.log('Not found');
        },
    ) => {
        const xmlHttp = new XMLHttpRequest();
        xmlHttp.responseType = 'json';
        xmlHttp.onreadystatechange = () => {
            if (xmlHttp.readyState === 4 && (xmlHttp.status === 200 || xmlHttp.status === 204)){
                callback(xmlHttp.response);
            } else if (xmlHttp.readyState === 4){
                notFoundCallback();
            }
        }
        xmlHttp.open(method, url, true); // true for asynchronous
        if (token !== null) {
            xmlHttp.setRequestHeader('Authorization', 'Bearer ' + token);
        }
        xmlHttp.send(data);
    }

    document.getElementById('testBtn').addEventListener('click', function (e) {
        alert("request sent");
        sendRequest("https://universal-cqa-develop.alquist.ai/health", "GET", function(res) {
            console.log(res);
            alert(res);
        });
    });
</script>
</body>
</html>
